# If needed, set a pretty prompt PS1
function __git_kubecontext () {
	ctx=$(kubectl config current-context 2> /dev/null) || return
	PS_CTX="${ctx}"
	printf -- " \033[0;31m%s\033[m ❯" "⎈ $PS_CTX"
}

function __git_ps1 () {
	ref=$(git symbolic-ref HEAD 2> /dev/null) || return
	PS_GIT="${ref#refs/heads/}"
	printf -- " \033[0;33m%s\033[m ❯" "Ґ $PS_GIT"
}

PS1_without_kubectx='\[\033[0;34m\]\h\[\033[m\] ❯ \[\033[0;35m\]\w\[\033[m\] ❯$(__git_ps1)\n↳ '
PS1_with_kubectx='\[\033[0;34m\]\h\[\033[m\] ❯ \[\033[0;35m\]\w\[\033[m\] ❯$(__git_kubecontext)$(__git_ps1)\n↳ '

function toggle_kubectx() {
	[ "$PS1" == "$PS1_without_kubectx" ] && PS1=$PS1_with_kubectx || PS1=$PS1_without_kubectx
}

PS1=$PS1_without_kubectx
