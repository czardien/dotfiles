" Encoding business
set encoding=utf-8

" Display line number
set nu

" Make the new window appear below the current window
set splitbelow
" Make the new window appear on the right
set splitright

" Ensures all Swap files end up in the same place; we don't pollute our
" projects
set backupdir=~/.vim/backup/
set directory=~/.vim/backup/

" For folding
set foldmethod=indent
set foldlevel=99

" To make use of the system clipboard
set clipboard=unnamed

" To get a nice backspace key that deletes over line breaks and indents
set backspace=indent,eol,start

" Making search prettier
set hlsearch

" Make sure to escape the spaces in the name properly
set guifont=Source\ Code\ Pro\ for\ Powerline

" Automatic triming of trailing whitespaces
autocmd BufWritePre * %s/\s\+$//e

" Leader key
let mapleader=" "

" Make it less distracting
let g:ale_lint_on_text_changed = 'never'
let g:ale_lint_on_enter = 0

" Keep the sign gutter open
let g:ale_sign_column_always = 1

" Only enabling Ale on python files for now
" https://github.com/dense-analysis/ale/issues/371#issuecomment-304313091
let g:ale_pattern_options = {
\   '.*\.py$': {'ale_enabled': 1},
\   '.*': {'ale_enabled': 0},
\}
let g:ale_pattern_options_enabled = 1

" use python language server
let g:ale_linters = {'python': ['pyls']}
let g:ale_python_pyls_config = {'pyls': {'configurationSources': ['flake8']}}

" Enable completion
let g:ale_completion_enabled = 1

" Set maximum number of suggestions
let g:ale_completion_max_suggestions = 1

" Hammer the LS
let g:ale_completion_delay = 0

" Redo action (instead of Ctrl-r)
nnoremap U <C-R>

" Make use of awesome fzf
nnoremap <C-p> :Files<Cr>
nnoremap <C-b> :Buffers<Cr>

" To disable search highlight using CTRL + o
nnoremap <c-o> <c-o>:noh<cr>

" For making enter inserting a newline
nmap <S-Enter> O<Esc>
nmap <CR> o<Esc>

" If Lightline is activated we don't need to see the double 'INSERT' at the
" bottom
set noshowmode
